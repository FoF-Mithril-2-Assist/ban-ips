{"version":3,"sources":["webpack://@fof/ban-ips/webpack/bootstrap","webpack://@fof/ban-ips/./forum.js","webpack://@fof/ban-ips/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/ban-ips/./src/common/models/BannedIP.js","webpack://@fof/ban-ips/./src/forum/addBanIPControl.js","webpack://@fof/ban-ips/./src/forum/addBannedBadge.js","webpack://@fof/ban-ips/./src/forum/components/BanIPModal.js","webpack://@fof/ban-ips/./src/forum/components/UnbanIPModal.js","webpack://@fof/ban-ips/./src/forum/index.js","webpack://@fof/ban-ips/external \"flarum.core.compat['Model']\"","webpack://@fof/ban-ips/external \"flarum.core.compat['components/Alert']\"","webpack://@fof/ban-ips/external \"flarum.core.compat['components/Badge']\"","webpack://@fof/ban-ips/external \"flarum.core.compat['components/Button']\"","webpack://@fof/ban-ips/external \"flarum.core.compat['components/Modal']\"","webpack://@fof/ban-ips/external \"flarum.core.compat['extend']\"","webpack://@fof/ban-ips/external \"flarum.core.compat['helpers/punctuateSeries']\"","webpack://@fof/ban-ips/external \"flarum.core.compat['helpers/username']\"","webpack://@fof/ban-ips/external \"flarum.core.compat['models/User']\"","webpack://@fof/ban-ips/external \"flarum.core.compat['utils/PostControls']\"","webpack://@fof/ban-ips/external \"flarum.core.compat['utils/UserControls']\"","webpack://@fof/ban-ips/external \"flarum.core.compat['utils/mixin']\""],"names":["BannedIP","apiEndpoint","exists","id","mixin","Model","creator","hasOne","user","address","attribute","reason","createdAt","transformDate","deletedAt","extend","PostControls","items","post","isBanned","prefix","canBanIP","isHidden","app","session","contentType","add","Button","component","children","translator","trans","className","icon","onclick","modal","show","UnbanIPModal","BanIPModal","UserControls","User","prototype","Badge","type","label","init","props","banOptions","banOption","m","prop","otherUsers","loading","title","content","otherUsersBanned","usernames","map","u","displayName","key","bind","ip","ipAddress","length","Alert","transChoice","users","punctuateSeries","dismissible","onsubmit","e","preventDefault","getOtherUsers","attrs","userId","store","createRecord","save","then","done","hide","onerror","loaded","request","data","attributes","url","forum","method","errorHandler","res","pushPayload","forEach","pushObject","filter","bannedIPs","bannedIP","obj","relationships","banned_ip","banned_ips","push","Modal","lazyRedraw","initializers","models","posts","hasMany","addBanIPControl","addBannedBadge"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class BannedIP extends mixin(Model, {\n    creator: Model.hasOne('creator'),\n    user: Model.hasOne('user'),\n    address: Model.attribute('address'),\n    reason: Model.attribute('reason'),\n    createdAt: Model.attribute('createdAt', Model.transformDate),\n    deletedAt: Model.attribute('deletedAt', Model.transformDate),\n}) {\n    apiEndpoint() {\n        return `/fof/ban-ips${this.exists ? `/${this.id()}` : ''}`;\n    }\n}\n","import { extend } from 'flarum/extend';\nimport PostControls from 'flarum/utils/PostControls';\nimport UserControls from 'flarum/utils/UserControls';\nimport Button from 'flarum/components/Button';\n\nimport BanIPModal from './components/BanIPModal';\nimport UnbanIPModal from './components/UnbanIPModal';\n\nexport default () => {\n    extend(PostControls, 'userControls', function(items, post) {\n        const isBanned = post.user().isBanned();\n        const prefix = isBanned ? 'un' : '';\n\n        // Removes ability to ban thyself and also does permission check.\n        if (!post.canBanIP() || post.isHidden() || post.user() === app.session.user || post.contentType() !== 'comment') return;\n\n        items.add(\n            `${prefix}ban`,\n            Button.component({\n                children: app.translator.trans(`fof-ban-ips.forum.${prefix}ban_ip_button`),\n                className: 'Button Button--link',\n                icon: 'fas fa-gavel',\n                onclick: () => app.modal.show(isBanned ? new UnbanIPModal({ post }) : new BanIPModal({ post })),\n            })\n        );\n    });\n\n    extend(UserControls, 'moderationControls', function(items, user) {\n        if (user.canBanIP() || user === app.session.user) return;\n\n        const isBanned = user.isBanned();\n        const prefix = isBanned ? 'un' : '';\n\n        items.add(\n            `${prefix}ban`,\n            Button.component({\n                children: app.translator.trans(`fof-ban-ips.forum.user_controls.${prefix}ban_button`),\n                icon: 'fas fa-gavel',\n                onclick: () => app.modal.show(isBanned ? new UnbanIPModal({ user }) : new BanIPModal({ user })),\n            })\n        );\n    });\n};\n","import { extend } from 'flarum/extend';\nimport User from 'flarum/models/User';\nimport Badge from 'flarum/components/Badge';\n\nexport default () => {\n    extend(User.prototype, 'badges', function(items) {\n        if (this.isBanned()) {\n            items.add(\n                'banned',\n                Badge.component({\n                    icon: 'fas fa-gavel',\n                    type: 'banned',\n                    label: app.translator.trans('fof-ban-ips.forum.user_badge.banned_tooltip'),\n                })\n            );\n        }\n    });\n};\n","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\nimport Alert from 'flarum/components/Alert';\nimport punctuateSeries from 'flarum/helpers/punctuateSeries';\nimport username from 'flarum/helpers/username';\n\nexport default class BanIPModal extends Modal {\n    init() {\n        this.post = this.props.post;\n        this.user = this.props.user || this.post.user();\n\n        this.banOptions = !!this.post ? ['only', 'all'] : ['all'];\n\n        this.banOption = m.prop(this.banOptions[0]);\n        this.reason = m.prop('');\n\n        this.otherUsers = {};\n\n        this.loading = false;\n    }\n\n    className() {\n        return 'Modal--medium';\n    }\n\n    title() {\n        return app.translator.trans('fof-ban-ips.lib.modal.title');\n    }\n\n    content() {\n        const otherUsersBanned = this.otherUsers[this.banOption()];\n        const usernames =\n            otherUsersBanned && otherUsersBanned.map(u => (u && u.displayName()) || app.translator.trans('core.lib.username.deleted_text'));\n\n        return (\n            <div className=\"Modal-body\">\n                <p>{app.translator.trans('fof-ban-ips.lib.modal.ban_ip_confirmation')}</p>\n\n                <div className=\"Form-group\">\n                    {this.banOptions.map(key => (\n                        <div>\n                            <input\n                                type=\"radio\"\n                                name=\"ban-option\"\n                                id={`ban-option-${key}`}\n                                checked={this.banOption() === key}\n                                onclick={this.banOption.bind(this, key)}\n                            />\n                            &nbsp;\n                            <label htmlFor={`ban-option-${key}`}>\n                                {app.translator.trans(`fof-ban-ips.forum.modal.ban_options_${key}_ip`, {\n                                    user: this.user,\n                                    ip: this.post && this.post.ipAddress(),\n                                })}\n                            </label>\n                        </div>\n                    ))}\n                </div>\n\n                <div className=\"Form-group\">\n                    <label className=\"label\">Reason</label>\n                    <input type=\"text\" className=\"FormControl\" bidi={this.reason} />\n                </div>\n\n                {otherUsersBanned\n                    ? otherUsersBanned.length\n                        ? Alert.component({\n                              children: app.translator.transChoice('fof-ban-ips.lib.modal.ban_ip_users', usernames.length, {\n                                  users: punctuateSeries(usernames),\n                              }),\n                              dismissible: false,\n                          })\n                        : Alert.component({\n                              children: app.translator.trans('fof-ban-ips.forum.modal.ban_ip_no_users'),\n                              dismissible: false,\n                              type: 'success',\n                          })\n                    : ''}\n\n                {otherUsersBanned && <br />}\n\n                <div className=\"Form-group\">\n                    <Button className=\"Button Button--primary\" type=\"submit\" loading={this.loading}>\n                        {usernames\n                            ? app.translator.trans('fof-ban-ips.lib.modal.submit_button')\n                            : app.translator.trans('fof-ban-ips.lib.modal.check_button')}\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        this.loading = true;\n\n        if (typeof this.otherUsers[this.banOption()] === 'undefined') return this.getOtherUsers();\n\n        const attrs = {\n            reason: this.reason(),\n            userId: this.user.id(),\n        };\n\n        if (this.banOption() === 'only') {\n            attrs.address = this.post.ipAddress();\n\n            app.store\n                .createRecord('banned_ips')\n                .save(attrs)\n                .then(this.done.bind(this))\n                .then(this.hide.bind(this), this.onerror.bind(this), this.loaded.bind(this));\n        } else if (this.banOption() === 'all') {\n            app.request({\n                data: {\n                    data: {\n                        attributes: attrs,\n                    },\n                },\n                url: `${app.forum.attribute('apiUrl')}${this.user.apiEndpoint()}/ban`,\n                method: 'POST',\n                errorHandler: this.onerror.bind(this),\n            })\n                .then(res => app.store.pushPayload(res).forEach(this.done.bind(this)))\n                .then(this.hide.bind(this))\n                .catch(() => {})\n                .then(this.loaded.bind(this));\n        }\n    }\n\n    getOtherUsers() {\n        const data = {};\n\n        if (this.banOption() === 'only') data.ip = this.post.ipAddress();\n\n        app.request({\n            data,\n            url: `${app.forum.attribute('apiUrl')}/fof/ban-ips/check-users/${this.user.id()}`,\n            method: 'GET',\n            errorHandler: this.onerror.bind(this),\n        })\n            .then(res => {\n                this.otherUsers[this.banOption()] = res.data.map(e => app.store.pushObject(e)).filter(e => e.bannedIPs().length === 0);\n                this.loading = false;\n            })\n            .catch(() => {})\n            .then(this.loaded.bind(this));\n    }\n\n    done(bannedIP) {\n        const obj = {\n            type: 'banned_ips',\n            id: bannedIP.id(),\n        };\n\n        if (this.post) {\n            this.post.data.relationships.banned_ip = {\n                data: obj\n            };\n        }\n\n        this.user.data.relationships.banned_ips.data.push(obj);\n        this.user.data.attributes.isBanned = true;\n    }\n}\n","import Button from 'flarum/components/Button';\nimport Alert from 'flarum/components/Alert';\nimport punctuateSeries from 'flarum/helpers/punctuateSeries';\nimport username from 'flarum/helpers/username';\n\nimport BanIPModal from './BanIPModal';\n\nexport default class UnbanIPModal extends BanIPModal {\n    title() {\n        return app.translator.trans('fof-ban-ips.lib.modal.unban_title');\n    }\n\n    content() {\n        const otherUsers = this.otherUsers[this.banOption()];\n        const usernames = otherUsers && otherUsers.map(u => (u && u.displayName()) || app.translator.trans('core.lib.username.deleted_text'));\n\n        return (\n            <div className=\"Modal-body\">\n                <p>{app.translator.trans('fof-ban-ips.lib.modal.unban_ip_confirmation')}</p>\n\n                <div className=\"Form-group\">\n                    {this.banOptions.map(key => (\n                        <div>\n                            <input\n                                type=\"radio\"\n                                name=\"ban-option\"\n                                id={`ban-option-${key}`}\n                                checked={this.banOption() === key}\n                                onclick={this.banOption.bind(this, key)}\n                            />\n                            &nbsp;\n                            <label htmlFor={`ban-option-${key}`}>\n                                {app.translator.trans(`fof-ban-ips.forum.modal.unban_options_${key}_ip`, {\n                                    user: this.user,\n                                    ip: this.post && this.post.ipAddress(),\n                                })}\n                            </label>\n                        </div>\n                    ))}\n                </div>\n\n                {otherUsers\n                    ? otherUsers.length\n                        ? Alert.component({\n                              children: app.translator.transChoice('fof-ban-ips.lib.modal.unban_ip_users', usernames.length, {\n                                  users: punctuateSeries(usernames),\n                              }),\n                              dismissible: false,\n                          })\n                        : Alert.component({\n                              children: app.translator.trans('fof-ban-ips.forum.modal.unban_ip_no_users'),\n                              dismissible: false,\n                              type: 'success',\n                          })\n                    : ''}\n\n                {otherUsers && <br />}\n\n                <div className=\"Form-group\">\n                    <Button className=\"Button Button--primary\" type=\"submit\" loading={this.loading}>\n                        {usernames\n                            ? app.translator.trans('fof-ban-ips.lib.modal.submit_button')\n                            : app.translator.trans('fof-ban-ips.lib.modal.check_button')}\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        this.loading = true;\n\n        if (typeof this.otherUsers[this.banOption()] === 'undefined') return this.getOtherUsers();\n\n        const attrs = {};\n\n        if (this.banOption() === 'only') {\n            attrs.address = this.post.ipAddress();\n\n            const bannedIP = this.post.bannedIP();\n\n            bannedIP\n                .delete()\n                .then(this.done.bind(this, bannedIP))\n                .then(this.hide.bind(this), this.onerror.bind(this), this.loaded.bind(this));\n        } else if (this.banOption() === 'all') {\n            app.request({\n                data: {\n                    data: {\n                        attributes: attrs,\n                    },\n                },\n                url: `${app.forum.attribute('apiUrl')}${this.user.apiEndpoint()}/unban`,\n                method: 'POST',\n                errorHandler: this.onerror.bind(this),\n            })\n                .then(this.done.bind(this))\n                .then(this.hide.bind(this))\n                .catch(() => {})\n                .then(this.loaded.bind(this));\n        }\n    }\n\n    getOtherUsers() {\n        const data = {};\n\n        if (this.banOption() === 'only') data.ip = this.post.ipAddress();\n\n        app.request({\n            data,\n            url: `${app.forum.attribute('apiUrl')}/fof/ban-ips/check-users/${this.user.id()}`,\n            method: 'GET',\n            errorHandler: this.onerror.bind(this),\n        })\n            .then(res => {\n                const data = app.store.pushPayload(res);\n\n                this.otherUsers[this.banOption()] = data.filter(e => e.bannedIPs().length === 1);\n                this.loading = false;\n\n                m.lazyRedraw();\n            })\n            .catch(() => {})\n            .then(this.loaded.bind(this));\n    }\n\n    done(bannedIP) {\n        if (bannedIP) {\n            delete this.post.data.relationships.banned_ip;\n\n            this.user.data.relationships.banned_ips.data = this.user.data.relationships.banned_ips.data.filter(e => e.id !== bannedIP.id());\n            this.user.data.attributes.isBanned = false;\n        } else {\n            this.user.data.relationships.banned_ips.data = [];\n            this.user.data.attributes.isBanned = false;\n\n            if (this.post) delete this.post.data.relationships.banned_ip;\n        }\n\n    }\n}\n","import Model from 'flarum/Model';\n\nimport addBanIPControl from './addBanIPControl';\nimport BannedIP from '../common/models/BannedIP';\nimport addBannedBadge from './addBannedBadge';\n\napp.initializers.add('fof/ban-ips', () => {\n    app.store.models.posts.prototype.canBanIP = Model.attribute('canBanIP');\n    app.store.models.posts.prototype.ipAddress = Model.attribute('ipAddress');\n    app.store.models.posts.prototype.bannedIP = Model.hasOne('banned_ip');\n\n    app.store.models.users.prototype.canBanIP = Model.attribute('canBanIP');\n    app.store.models.users.prototype.isBanned = Model.attribute('isBanned');\n    app.store.models.users.prototype.bannedIPs = Model.hasMany('banned_ips');\n\n    app.store.models.banned_ips = BannedIP;\n\n    addBanIPControl();\n    addBannedBadge();\n});\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Badge'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/punctuateSeries'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/PostControls'];","module.exports = flarum.core.compat['utils/UserControls'];","module.exports = flarum.core.compat['utils/mixin'];"],"sourceRoot":""}